<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Eric Chiang | Building your own certificate authority</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
	
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YR9ZQCMH4S"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-YR9ZQCMH4S', { 'anonymize_ip': false });
}
</script>

  </head>

  <body>
    <nav>
    <ul class="menu">
	  <li class="menu-element">Eric Chiang</li>
      
      <li><a href="/">posts</a></li>
      
      <li><a href="/about/">about</a></li>
      
      <li><a href="/post/index.xml">rss</a></li>
      
      <li><a href="/license/">license</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Building your own certificate authority</span></h1>

<p class="date">2024/03/02</p>
</div>

<main>
<p>Certificate authorities are how you want to distribute credentials to users, not just
This could be an <a href="https://smallstep.com/blog/use-ssh-certificates/">SSH certificate</a></p>
<p>Certificate authorities are often easier than the manual alternatives.</p>
<h2 id="issuing-certificates">Issuing certificates</h2>
<p>The core responsibility of a CA is processing certificate signing requests from clients. For web PKI, that means proving ownership of a DNS record. Either because you purchased the record through the CA, or <a href="https://letsencrypt.org/docs/challenge-types/">performed some sort of challenge</a>.</p>
<h2 id="client-configuration">Client configuration</h2>
<h2 id="issuance-policy">Issuance policy</h2>
<h2 id="key-storage">Key storage</h2>
<p>CA private keys are moderately sensitive pieces of data to lose or otherwise misplace. It’s generally expected to put some thought into preventing keys from growing legs and <a href="https://msrc.microsoft.com/blog/2023/09/results-of-major-technical-investigations-for-storm-0558-key-acquisition/">ending up somewhere where it shouldn’t</a>.</p>
<p>I’ve worked at a company that had an offline device in a basement, a GPG key on a hardware token, and a <a href="https://www.jabberwocky.com/software/paperkey/">Paperkey</a> backup in a safety deposit box. Depending on compliance requirements or concern about physical tampering, there are plenty of high ticket solutions to buy or <a href="https://azure.microsoft.com/en-us/pricing/details/azure-dedicated-hsm/">rent</a>.</p>
<p>But a FIPS certified HSM isn’t necessary to produce good outcomes. There are plenty of commodity options for hardware like <a href="https://github.com/go-piv/piv-go">security keys</a> or <a href="../tpm-keys/">Trusted Platform Modules</a> that keep the raw private key material out of reach of the OS. For Cloud, almost all providers have <a href="https://cloud.google.com/security/products/security-key-management?hl=en">key management services</a> that achieve similar outcomes, with the added benefit of builtin logging every time the key is accessed or modified.</p>
<p>Above all, it doesn’t take much to avoid holding a private key on disk or in memory.</p>
<h2 id="auditing">Auditing</h2>

</main>

  <footer>
  
  
  </footer>
    <script>
	  document.querySelectorAll("h2, h3, h4, h5, h6").forEach(function(node) {
if (node.id === "") {
  return;
}
let a = document.createElement("a");
let img = document.createElement("img");
img.src = "/img/link.svg";
img.className = "header-link";
a.href = "#" + node.id;
a.append(img);
node.append(a);

	  });
    </script>
  </body>
</html>

